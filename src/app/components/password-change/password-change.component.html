<div class="password-change-container">
  <h2>Change Password</h2>

  <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">

    <!-- Current Password -->
    <div>
      <label for="oldPassword">Current Password</label>
      <div class="input-group">
        <input
          [type]="showOldPassword ? 'text' : 'password'"
          id="oldPassword"
          formControlName="oldPassword"
        />
        <button type="button" (click)="toggleVisibility('current')">
          {{ showOldPassword ? 'Hide' : 'Show' }}
        </button>
      </div>
      <div *ngIf="passwordForm.get('oldPassword')?.touched && passwordForm.get('oldPassword')?.invalid">
        Current password is required.
      </div>
    </div>

    <!-- New Password -->
    <div>
      <label for="newPassword">New Password</label>
      <div class="input-group">
        <input
          [type]="showNewPassword ? 'text' : 'password'"
          id="newPassword"
          formControlName="newPassword"
        />
        <button type="button" (click)="toggleVisibility('new')">
          {{ showNewPassword ? 'Hide' : 'Show' }}
        </button>
      </div>
      <div *ngIf="passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.invalid">
        New password must be at least 6 characters.
      </div>
    </div>

    <!-- Confirm Password -->
    <div>
      <label for="confirmPassword">Confirm New Password</label>
      <div class="input-group">
        <input
          [type]="showConfirmPassword ? 'text' : 'password'"
          id="confirmPassword"
          formControlName="confirmPassword"
        />
        <button type="button" (click)="toggleVisibility('confirm')">
          {{ showConfirmPassword ? 'Hide' : 'Show' }}
        </button>
      </div>
      <div *ngIf="passwordForm.get('confirmPassword')?.touched && passwordForm.get('confirmPassword')?.invalid">
        Confirm password is required.
      </div>
    </div>

    <!-- Error and Success Messages -->
    <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="success">{{ successMessage }}</div>

    <!-- Submit -->
    <button type="submit" [disabled]="isSubmitting">
      {{ isSubmitting ? 'Submitting...' : 'Change Password' }}
    </button>
  </form>
</div>
